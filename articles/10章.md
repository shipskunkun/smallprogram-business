## review

navi 组件，左切换右切换思路、细节



## 10-1 缓存实现的思路
// 缓存中寻找？ 读缓存 ： 向服务器发送请求


注意，getLatest 中的index 是随时可变的，因为是从服务器中拿到的

getClassic 是上一页，下一页获取的数据，这个index 是可以被缓存的


是否允许当前和服务器有些许延迟，使用缓存，因为缓存中更不一定是最新的

### Q: 是否需要缓存？
	1. 优点
		不需要频繁请求服务器，稍微允许延时可以很大程度提高客户端体验
		一般来说，大部分程序不需要实时同步
	2. 不足
		客户端的数据是没有和服务端保持同步最新
		加大开发成本，麻烦
		


## 10-3 

扩展运算符？

```
// data 中， classic 对象 赋值等于 res
classic:  res 

// xml中，使用classic 属性
{{ classic.image }}



改写：
...res
{{ image }}

```

## 10-5
自定义组件，不支持， hidden="{{ false }}"  识别不了

```
那怎么办呢？
在组件内部，<view hidden="{{}}">
或者 使用 wx:if
```

## 10-6  import 复用组件样式

@import '../common.wxss'  



movie组件和 navi 组件共同使用样式代码  
@import "../common.wxss";


## 10-8 播放音乐

const mg = wx.getBackgroundAudioManager()

 mg 具有哪些方法： 
   
+ onPause() 暂停 
+ onPlay()
+ onStop
+ onEnded
+ src : 资源



## 10-9 组件间通信

Q: 在A页面播放歌曲，切换到B页面，停止播放？

A：  

A组件和B页面都有同一个父组件C  
A 向父组件传递 triggerEvent，  
子组件向父组件，triggerEvent    
父组件向子组件传递数据， 组件上绑定属性

   
> 解决方法1 不行  
为什么监听 组件的 detached 生命周期，没有效果  ？  
hidden不能触发，改成 wx:if

> 解决方法2

```
 <v-music wx:if="{{classic.type==200}}"  />
```

hidden不会触发 attached、detached ,元素还在
wx:if 声明周期还会执行


### 官方文档：

wx:if 的条件值切换时，框架有一个局部渲染的过程，因为它会确保条件块在切换时销毁或重新渲染。
相比之下，hidden 就简单的多，组件始终会被渲染，只是简单的控制显示与隐藏。


一般来说，wx:if 有更高的切换消耗而 hidden 有更高的初始渲染消耗。因此，如果需要频繁切换的情景下，用 hidden 更好，如果在运行时条件不大可能改变则 wx:if 较好。



## 10-12

如何让 music 中暂停、播放事件 和 mg 对象 的状态保持一致？

回答： 监听  mgr 的动作，onPlay、 onPause、onStop、 onEnded 等


组件中的 attached 相当于page  中的 onready 吧

```
attached(event) {
	// 跳转页面 当前 切换
	this._recoverStatus()
	this._monitorSwitch()
},

```


## 10-13

音乐组件，点击播放，cd盘会旋转。    
旋转的样式， css3动画

