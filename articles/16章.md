## 12-1 book页面

使用 wx:for 而且使用组件，最好配套使用block， 易于理解

	<block wx:key="id" wx:for="{{books}}">
	    <v-book book="{{item}}" />
	</block>


## 12-4 一行两个图书

	.books-container {
	    margin-top: 10rpx;
	    display: flex;
	    flex-direction: row;
	    flex-wrap: wrap;
	    justify-content: space-between; //两端分布，中间空隙没写死
	    padding: 0 90rpx;  //左右空隙固定
	}


## 12-5 wx：key的用法与意义

制定唯一标识，不重复，数字或者字符串

作用：提高渲染效率

	<block wx:key="id" wx:for="{{books}}">
	    <v-book book="{{item}}" />
	</block>

## 12-6 book-detail


>1.组件传递id

```
wx.navigateTo({
	url:`/pages/book-detail/book-detail?bid=${bid}`
})

onLoad: function (options) {
    const bid = options.bid
}
```

>2.promise.all 使用

接受promise数组

```
const detail = bookModel.getDetail(bid)
const comments = bookModel.getComments(bid)
const likeStatus = bookModel.getLikeStatus(bid)


Promise.all([detail, comments, likeStatus])
  .then(res => {
   })

```

## 12-8 三种小程序编译模式

> 问题：如何提高开发效率？每次开发 book-detail 都要从头走一遍

1. 普通编译：每次从page第一个页面
2. 添加自定义编译模式，可以自定义设置 启动页面，启动参数(就是url后面的参数)，bid=1120 
3. 二维码编译，没用过


## 12-9 v-tag 标签组件

slot 用法  
解决什么问题：如果有 item 有 nums, 才显示个数 text

```
options: {
    multipleSlots: true,  // 表明组件使用插槽，不管使用几个slot，都需要加上
},
  
  
<view bind:tap="onTap" class="container tag-class ">
    <slot name="before"></slot>
    <text >{{text}}</text>
    <slot name="after"></slot>
</view>

// 使用，需要显示text, 就传入 slot， slot="after"
<v-tag tag-class="{{tool.highlight(index)}}" text="{{item.content}}">
   <text class="num" slot="after">{{'+'+item.nums}}</text>
</v-tag>
```
## 12-12自定义组件样式探讨 

如何修改开源最近UI
不违反组件封装原则的，修改默认样式的机制


1. css hack 权重大，覆盖重新
2. 通过向子组件传递style对象，properties 中接受改组件
	
		不好：css通过对象，写在js中不好
3. 推荐使用的：
	
		外部样式externalClass， 组件属性， slot
		

## 12-14 如何定义组件外部的样式


有时，组件希望接受外部传入的样式类。此时可以在 Component 中用 externalClasses 定义段定义若干个外部样式类。


externalClasses: []

```

/* 组件 custom-component.js */
Component({
  externalClasses: ['my-class']
})


<!-- 组件 custom-component.wxml -->
<custom-component class="my-class">这段文本的颜色由组件外的 class 决定</custom-component>

```


可能权重不高，使用  !important 增加权重


## 13章

wxs 文件是干嘛的？
可以用来做过滤


通过wxs ，可以在wxml中，编写和调用 js 代码

导入语法：
	
	//为什么不能用绝对路径
	<wxs src="../../util/filter.wss" module="util">



wxs 中不能使用 const , 不能使用 js 的 es6 语法

wxs 和 js 是隔离的，在ios上运行效率比js快2~20倍



